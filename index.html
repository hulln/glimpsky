<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bluesky Profile Viewer</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <button class="about-btn" id="infoBtn" type="button">About</button>
        
        <div class="header">
            <div class="title-row">
                <img src="favicon.svg" alt="" class="title-icon">
                <h1 id="mainTitle">Bluesky Profile Viewer</h1>
            </div>
            <p class="subtitle">View posts and likes from any Bluesky profile. No login needed.</p>
            
            <div class="input-group">
                <label for="handle">Bluesky Handle or DID</label>
                <input 
                    type="text" 
                    id="handle" 
                    placeholder="e.g., user.bsky.social or oblachek.eu"
                    value="">
                <div class="suggestions">
                    <div class="suggestions-panel" id="handleSuggestions"></div>
                </div>
            </div>

            <div class="filter-options">
                <div class="checkbox-group">
                    <input type="checkbox" id="hideReposts" checked>
                    <label for="hideReposts">Hide reposts</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="hideReplies">
                    <label for="hideReplies">Hide replies</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="onlyLinks">
                    <label for="onlyLinks">Only links</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="hideQuotes">
                    <label for="hideQuotes">Hide quotes</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="sortOldest">
                    <label for="sortOldest">Oldest first</label>
                </div>
            </div>

            <div class="advanced-filters-inline" id="advancedFiltersInline">
                <div class="advanced-filters-toggle" id="advancedFiltersToggle">
                    <span>Advanced filters</span>
                    <span class="toggle-icon">▼</span>
                </div>
                <div class="advanced-filters-content" id="advancedFiltersContent">
                    <div class="filter-section">
                        <label for="dateFrom">Filter by date range</label>
                        <div class="date-inputs">
                            <input type="date" id="dateFrom" placeholder="From">
                            <input type="date" id="dateTo" placeholder="To">
                        </div>
                    </div>

                    <div class="filter-section" style="margin-top: 12px;">
                        <label for="searchText">Search posts by text</label>
                        <input type="text" class="search-input" id="searchText" placeholder="Enter keywords...">
                    </div>

                    <div class="filter-section" style="margin-top: 12px;">
                        <label for="searchAuthor">Search by author (handle or display name)</label>
                        <input type="text" class="search-input" id="searchAuthor" placeholder="e.g. /bsky\\.social$/ or @handle">
                        <div style="margin-top: 6px; font-size: 12px; color: #94a3b8;">Search supports regex in /pattern/flags (e.g. /hello.*/i)</div>
                    </div>

                    <div class="filter-banner" id="filterBanner">
                        <span style="flex: 1;">Filters require loading all content. Load now?</span>
                        <div style="display: flex; gap: 8px; flex-shrink: 0;">
                            <button class="btn-outline" id="filterLoadBtn" type="button">Load & Apply</button>
                            <button class="btn-outline" id="filterCancelBtn" type="button">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn-tab" id="loadPostsBtn">View Posts</button>
                <button class="btn-tab" id="loadLikesBtn">View Likes</button>
            </div>
        </div>

        <div id="error"></div>
        
        <div class="profile-card" id="profileCard"></div>

        <div class="content-section" id="contentSection">
            <div class="section-header">
                <h3 class="section-title" id="sectionTitle">Posts</h3>
            </div>
            <div id="content"></div>
            <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                <button class="load-more" id="loadMoreBtn">Load More</button>
            </div>
        </div>
    </div>

    
    <div id="listModal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="listModalTitle">
            <div class="modal-header">
                <div class="modal-title" id="listModalTitle">List</div>
                <button id="listModalClose" class="iconButton" type="button" aria-label="Close">×</button>
            </div>
            <div id="listModalMeta" class="modal-meta"></div>
            <div id="listModalList" class="modal-list"></div>
            <div class="modal-footer">
                <button id="listModalLoadMore" class="btn-secondary" type="button">Load more</button>
            </div>
        </div>
    </div>

    <div id="infoModal" class="modal" aria-hidden="true">
        <div class="info-modal-content" role="dialog" aria-modal="true">
            <div class="info-modal-header">
                <h2>About This Tool</h2>
            </div>
            <div class="info-modal-body">
                <p>This Bluesky Profile Viewer lets you explore public posts, likes, followers, and other information from any Bluesky account. All data comes from the open AT Protocol via public Bluesky APIs and PDS endpoints. It also demonstrates how accessible open data on ATProto can be.</p>
                
                <p><strong>Inspired by</strong> <a href="https://github.com/ClearskyApp06/clearskyservices" target="_blank" rel="noopener noreferrer">Clearsky</a> (blocking features) and <a href="https://github.com/luizzeroxis/bluesky-likes/" target="_blank" rel="noopener noreferrer">Bluesky Likes by luizzeroxis</a> (likes display).</p>
                
                <p><strong>Made by</strong> <a href="https://bsky.app/profile/oblachek.eu" target="_blank" rel="noopener noreferrer">oblachek.eu</a> with a very big amount of good vibes named ChatGPT and Claude.</p>
                
                <p>This tool is for informational and educational purposes only.</p>
                <p class="share-line">Share: <a class="share-link" id="shareToolBtn" href="#" role="button">Copy link</a> <a class="share-link" id="shareBskyLink" href="#" target="_blank" rel="noopener noreferrer">Share on Bluesky</a></p>
            </div>
            <div class="info-modal-footer">
                <button id="infoModalClose" type="button">Close</button>
            </div>
        </div>
    </div>

<script src="app.js" defer></script>
</body>
</html>
